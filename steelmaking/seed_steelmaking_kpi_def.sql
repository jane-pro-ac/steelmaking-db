-- Seed KPI definitions into steelmaking.steelmaking_kpi_def
-- Source: steelmaking/kpi_code.json
--
-- proc_cd mapping:
--   BOF -> G12, LF -> G13, RH -> G15, CCM -> G16
--
-- Notes:
-- - upper/lower limits and digit settings are heuristic but intended to be realistic.
-- - Script is idempotent via ON CONFLICT (proc_cd, kpi_code).

INSERT INTO steelmaking.steelmaking_kpi_def (
  proc_cd,
  kpi_code,
  kpi_name,
  unit,
  description,
  int_digits,
  decimal_digits,
  upper_limit,
  lower_limit,
  display_enabled,
  show_in_config,
  display_order
)
VALUES
  -- @@ROWS@@ (generated rows inserted below this marker)
  ('G12', 'BOF_PROC_T_PV', '温度当前值', '℃', '转炉钢水/炉内温度当前值（可来自副枪/测温/模型）', 4, 0, 1800, 1200, true, true, 10),
  ('G12', 'BOF_PROC_T_SP', '温度设定值', '℃', '转炉目标温度设定值（若有）', 4, 0, 1800, 1200, true, true, 20),
  ('G12', 'BOF_PROC_T_DEV', '温度偏差', '℃', '温度偏差=PV-SP（若无SP可不写入）', 3, 0, 200, -200, true, true, 30),
  ('G12', 'BOF_PROC_T_RATE', '温度变化速率', '℃/min', '温度随时间变化速率，用于异常升温/降温告警', 2, 1, 50, -50, true, true, 40),
  ('G12', 'BOF_PROC_O2_RATE_PV', '吹氧流量当前值', 'Nm3/min', '转炉吹氧实时流量', 5, 0, 10000, 0, true, true, 50),
  ('G12', 'BOF_PROC_O2_RATE_SP', '吹氧流量设定值', 'Nm3/min', '吹氧目标流量设定值（若有）', 5, 0, 10000, 0, true, true, 60),
  ('G12', 'BOF_PROC_O2_RATE_DEV', '吹氧流量偏差', 'Nm3/min', '吹氧流量偏差=PV-SP（若无SP可不写入）', 4, 0, 5000, -5000, true, true, 70),
  ('G12', 'BOF_PROC_O2_TOTAL', '累计吹氧量', 'Nm3', '从吹炼开始累计的吹氧体积', 6, 0, 200000, 0, true, true, 80),
  ('G12', 'BOF_PROC_LANCE_H_PV', '枪位高度当前值', 'mm', '氧枪枪位高度实时值', 4, 0, 6000, 0, true, true, 90),
  ('G12', 'BOF_PROC_LANCE_H_SP', '枪位高度设定值', 'mm', '枪位高度设定值（若有）', 4, 0, 6000, 0, true, true, 100),
  ('G12', 'BOF_PROC_LANCE_H_DEV', '枪位高度偏差', 'mm', '枪位高度偏差=PV-SP（若无SP可不写入）', 4, 0, 2000, -2000, true, true, 110),
  ('G12', 'BOF_PROC_LANCE_MOVE_RATE', '枪位移动速率', 'mm/min', '枪位高度变化速率，用于识别异常快速升降', 4, 0, 5000, -5000, true, true, 120),
  ('G12', 'BOF_GAS_OFFGAS_CO_PCT', '烟气CO浓度', '%', '转炉烟气CO体积分数（如有）', 3, 2, 100, 0, true, true, 130),
  ('G12', 'BOF_GAS_OFFGAS_CO2_PCT', '烟气CO2浓度', '%', '转炉烟气CO2体积分数（如有）', 3, 2, 100, 0, true, true, 140),
  ('G12', 'BOF_GAS_OFFGAS_O2_PCT', '烟气O2浓度', '%', '转炉烟气O2体积分数（如有）', 3, 2, 100, 0, true, true, 150),
  ('G12', 'BOF_GAS_OFFGAS_TEMP_PV', '烟气温度', '℃', '转炉烟气温度（如有）', 4, 0, 2000, 0, true, true, 160),
  ('G12', 'BOF_GAS_OFFGAS_FLOW_PV', '烟气流量', 'Nm3/min', '转炉烟气流量（如有）', 5, 0, 30000, 0, true, true, 170),
  ('G12', 'BOF_MAT_HM_WT_PV', '铁水量', 't', '铁水加入量（确认/实时）', 3, 2, 400, 0, true, true, 180),
  ('G12', 'BOF_MAT_SCRAP_RATE', '废钢加入速率', 't/min', '废钢实时加入速率（如可计算/采集）', 2, 2, 10, 0, true, true, 190),
  ('G12', 'BOF_MAT_SCRAP_TOTAL', '废钢累计加入量', 't', '废钢累计加入量', 3, 2, 120, 0, true, true, 200),
  ('G12', 'BOF_MAT_LIME_TOTAL', '石灰累计加入量', 'kg', '石灰累计加入量', 5, 0, 50000, 0, true, true, 210),
  ('G12', 'BOF_MAT_DOLOMITE_TOTAL', '白云石累计加入量', 'kg', '白云石累计加入量', 5, 0, 50000, 0, true, true, 220),
  ('G12', 'BOF_MAT_FLUX_TOTAL', '造渣料累计加入量', 'kg', '造渣料累计加入量（也可拆石灰/白云石等）', 5, 0, 50000, 0, true, true, 230),
  ('G12', 'BOF_MAT_CARBON_INJ_RATE', '喷吹碳粉速率', 'kg/min', '喷吹碳粉实时速率（如有）', 3, 1, 500, 0, true, true, 240),
  ('G12', 'BOF_MAT_CARBON_INJ_TOTAL', '喷吹碳粉累计', 'kg', '喷吹碳粉累计量（如有）', 5, 0, 20000, 0, true, true, 250),
  ('G12', 'BOF_PROC_VESSEL_TILT_ANGLE_PV', '炉体倾动角度', 'deg', '转炉炉体倾动角度（如有）', 3, 1, 130, 0, true, true, 260),
  ('G12', 'BOF_PROC_PRESSURE_PV', '炉体/系统压力', 'kPa', '转炉相关压力信号（如有）', 3, 1, 100, 0, true, true, 270),
  ('G12', 'BOF_CHEM_C_PV', '碳含量C', '%', '成分C当前值（可来自检化验/模型回写）', 1, 3, 2, 0, true, true, 280),
  ('G12', 'BOF_CHEM_P_PV', '磷含量P', '%', '成分P当前值（可来自检化验/模型回写）', 1, 4, 0.2, 0, true, true, 290),
  ('G12', 'BOF_CHEM_O_PV', '氧含量O', 'ppm', '溶解氧/氧含量当前值（如有）', 4, 0, 3000, 0, true, true, 300),
  ('G12', 'BOF_CHEM_S_PV', '硫含量S', '%', '成分S当前值（可来自检化验/模型回写）', 1, 4, 0.2, 0, true, true, 310),
  ('G13', 'LF_PROC_T_PV', '温度当前值', '℃', 'LF钢水温度当前值', 4, 0, 1800, 1200, true, true, 10),
  ('G13', 'LF_PROC_T_SP', '温度设定值', '℃', 'LF目标温度设定值', 4, 0, 1800, 1200, true, true, 20),
  ('G13', 'LF_PROC_T_DEV', '温度偏差', '℃', '温度偏差=PV-SP', 3, 0, 200, -200, true, true, 30),
  ('G13', 'LF_PROC_T_RATE', '温度变化速率', '℃/min', '温度变化速率（升温/降温异常检测）', 2, 1, 50, -50, true, true, 40),
  ('G13', 'LF_ENER_POWER_PV', '功率当前值', 'MW', 'LF电弧加热功率实时值', 2, 2, 80, 0, true, true, 50),
  ('G13', 'LF_ENER_POWER_SP', '功率设定值', 'MW', 'LF功率设定值（若有）', 2, 2, 80, 0, true, true, 60),
  ('G13', 'LF_ENER_POWER_DEV', '功率偏差', 'MW', '功率偏差=PV-SP', 2, 2, 30, -30, true, true, 70),
  ('G13', 'LF_ENER_ENERGY_TOTAL', '累计电耗', 'kWh', 'LF累计电耗（从进站开始积分）', 6, 0, 100000, 0, true, true, 80),
  ('G13', 'LF_ENER_ELEC_I_PV', '电流', 'kA', 'LF电流实时值', 3, 1, 150, 0, true, true, 90),
  ('G13', 'LF_ENER_ELEC_V_PV', '电压', 'V', 'LF电压实时值', 4, 0, 1200, 0, true, true, 100),
  ('G13', 'LF_ENER_ELEC_PF_PV', '功率因数', '-', 'LF功率因数实时值（如有）', 1, 3, 1, 0, true, true, 110),
  ('G13', 'LF_ENER_ELEC_TAP_POS_PV', '变压器档位', 'step', 'LF变压器档位（如有）', 2, 0, 50, 0, true, true, 120),
  ('G13', 'LF_GAS_AR_RATE_PV', '氩气流量', 'Nm3/h', 'LF底吹氩气流量实时值', 4, 0, 5000, 0, true, true, 130),
  ('G13', 'LF_GAS_AR_RATE_SP', '氩气流量设定值', 'Nm3/h', 'LF氩气流量设定值（若有）', 4, 0, 5000, 0, true, true, 140),
  ('G13', 'LF_GAS_AR_RATE_DEV', '氩气流量偏差', 'Nm3/h', '氩气流量偏差=PV-SP', 4, 0, 2000, -2000, true, true, 150),
  ('G13', 'LF_GAS_AR_TOTAL', '氩气累计', 'Nm3', 'LF累计氩气用量', 6, 0, 100000, 0, true, true, 160),
  ('G13', 'LF_MAT_ALLOY_RATE', '合金加入速率', 'kg/min', '合金加料实时速率（如可计算/采集）', 3, 1, 500, 0, true, true, 170),
  ('G13', 'LF_MAT_ALLOY_TOTAL', '合金累计加入量', 'kg', '合金累计加入量', 5, 0, 20000, 0, true, true, 180),
  ('G13', 'LF_MAT_FLUX_TOTAL', '辅料/造渣料累计加入量', 'kg', 'LF辅料/造渣料累计加入量（如有）', 5, 0, 50000, 0, true, true, 190),
  ('G13', 'LF_MAT_WIREFEED_RATE', '喂丝速率', 'm/min', '喂丝速度（如有）', 3, 1, 300, 0, true, true, 200),
  ('G13', 'LF_MAT_WIREFEED_TOTAL', '喂丝累计长度', 'm', '喂丝累计长度（如有）', 5, 0, 10000, 0, true, true, 210),
  ('G13', 'LF_MET_Slag_BASICITY_PV', '炉渣碱度', '-', '炉渣碱度（如可采集/计算）', 1, 2, 6, 0, true, true, 220),
  ('G13', 'LF_MET_DESULF_RATE_PCT', '脱硫率', '%', '脱硫率（如治理平台计算）', 3, 2, 100, 0, true, true, 230),
  ('G13', 'LF_CHEM_C_PV', '碳含量C', '%', 'LF阶段成分C当前值（检化验/模型回写）', 1, 3, 2, 0, true, true, 240),
  ('G13', 'LF_CHEM_S_PV', '硫含量S', '%', 'LF阶段成分S当前值（检化验/模型回写）', 1, 4, 0.2, 0, true, true, 250),
  ('G13', 'LF_CHEM_O_PV', '氧含量O', 'ppm', 'LF阶段氧含量当前值（如有）', 4, 0, 3000, 0, true, true, 260),
  ('G13', 'LF_CHEM_AL_PV', '铝含量Al', '%', 'LF阶段铝含量当前值（如有）', 1, 3, 1, 0, true, true, 270),
  ('G15', 'RH_PROC_VAC_PV', '真空度当前值', 'Pa', 'RH真空度实时值（越小真空越高）', 5, 0, 10000, 0, true, true, 10),
  ('G15', 'RH_PROC_VAC_SP', '真空度设定值', 'Pa', 'RH目标真空度设定值（若有）', 5, 0, 10000, 0, true, true, 20),
  ('G15', 'RH_PROC_VAC_DEV', '真空度偏差', 'Pa', '真空度偏差=PV-SP（若无SP可不写入）', 5, 0, 10000, -10000, true, true, 30),
  ('G15', 'RH_PROC_VAC_DROP_RATE', '真空下降速率', 'Pa/min', '抽真空过程中真空度变化速率（用于识别抽速不足/漏气）', 4, 0, 5000, 0, true, true, 40),
  ('G15', 'RH_PROC_VAC_STABLE_TIME_MIN', '真空稳定累计时间', 'min', '达到目标真空后累计稳定时长（可滚动计算/治理平台计算）', 2, 1, 60, 0, true, true, 50),
  ('G15', 'RH_PROC_CIRC_RATE_PV', '循环流量当前值', 't/min', 'RH循环流量实时值（如有）', 3, 2, 500, 0, true, true, 60),
  ('G15', 'RH_PROC_CIRC_TOTAL', '循环钢水累计量', 't', '循环钢水累计量（对循环流量积分）', 4, 2, 5000, 0, true, true, 70),
  ('G15', 'RH_PROC_LIFT_GAS_RATE_PV', '提升气流量', 'Nm3/h', 'RH提升气（常为氩气）流量实时值（如有）', 4, 0, 5000, 0, true, true, 80),
  ('G15', 'RH_PROC_LIFT_GAS_TOTAL', '提升气累计', 'Nm3', 'RH提升气累计用量（如有）', 6, 0, 100000, 0, true, true, 90),
  ('G15', 'RH_GAS_AR_RATE_PV', '氩气流量', 'Nm3/h', 'RH氩气流量实时值', 4, 0, 5000, 0, true, true, 100),
  ('G15', 'RH_GAS_AR_SP', '氩气流量设定值', 'Nm3/h', 'RH氩气流量设定值（若有）', 4, 0, 5000, 0, true, true, 110),
  ('G15', 'RH_GAS_AR_DEV', '氩气流量偏差', 'Nm3/h', '氩气流量偏差=PV-SP', 4, 0, 2000, -2000, true, true, 120),
  ('G15', 'RH_GAS_AR_TOTAL', '氩气累计', 'Nm3', 'RH累计氩气用量', 6, 0, 100000, 0, true, true, 130),
  ('G15', 'RH_PROC_T_PV', '温度当前值', '℃', 'RH处理过程温度实时值（如有）', 4, 0, 1800, 1200, true, true, 140),
  ('G15', 'RH_PROC_T_SP', '温度设定值', '℃', 'RH目标温度设定值（如有）', 4, 0, 1800, 1200, true, true, 150),
  ('G15', 'RH_PROC_T_DEV', '温度偏差', '℃', '温度偏差=PV-SP', 3, 0, 200, -200, true, true, 160),
  ('G15', 'RH_PROC_T_RATE', '温度变化速率', '℃/min', '温度变化速率（异常降温识别）', 2, 1, 50, -50, true, true, 170),
  ('G15', 'RH_CHEM_C_PV', '碳含量C', '%', 'RH阶段成分C当前值（检化验/模型回写）', 1, 3, 2, 0, true, true, 180),
  ('G15', 'RH_CHEM_H_PV', '氢含量H', 'ppm', 'RH阶段氢含量当前值（常用于判定脱氢效果）', 2, 2, 10, 0, true, true, 190),
  ('G15', 'RH_CHEM_N_PV', '氮含量N', 'ppm', 'RH阶段氮含量当前值', 3, 1, 200, 0, true, true, 200),
  ('G15', 'RH_CHEM_O_PV', '氧含量O', 'ppm', 'RH阶段氧含量当前值（如有）', 4, 0, 3000, 0, true, true, 210),
  ('G15', 'RH_EQUIP_PUMP_LOAD_PV', '真空泵负载', '%', '真空泵负载百分比（如有）', 3, 2, 100, 0, true, true, 220),
  ('G15', 'RH_EQUIP_PUMP_TEMP_PV', '真空泵温度', '℃', '真空泵温度（如有）', 3, 1, 150, 0, true, true, 230),
  ('G15', 'RH_EQUIP_LEAK_RATE_PV', '漏气率/回升率', 'Pa/min', '破真空趋势下的回升速率（可用于漏气识别，治理平台推算）', 4, 0, 2000, 0, true, true, 240),
  ('G16', 'CCM_PROC_SPEED_PV', '拉速当前值', 'm/min', '连铸拉速实时值', 2, 2, 10, 0, true, true, 10),
  ('G16', 'CCM_PROC_SPEED_SP', '拉速设定值', 'm/min', '连铸拉速设定值', 2, 2, 10, 0, true, true, 20),
  ('G16', 'CCM_PROC_SPEED_DEV', '拉速偏差', 'm/min', '拉速偏差=PV-SP', 1, 2, 2, -2, true, true, 30),
  ('G16', 'CCM_PROC_SPEED_FLUCT_PCT', '拉速波动率', '%', '拉速波动率（可用滑窗标准差/均值等方式计算）', 2, 2, 50, 0, true, true, 40),
  ('G16', 'CCM_PROC_SPEED_ACCEL', '拉速变化率/加速度', 'm/min2', '拉速变化率（用于识别急加速/急减速）', 1, 3, 2, -2, true, true, 50),
  ('G16', 'CCM_MOLD_LEVEL_PV', '结晶器液位当前值', 'mm', '结晶器液位实时值（关键告警指标）', 2, 1, 50, -50, true, true, 60),
  ('G16', 'CCM_MOLD_LEVEL_SP', '结晶器液位设定值', 'mm', '结晶器液位设定值（若有）', 2, 1, 50, -50, true, true, 70),
  ('G16', 'CCM_MOLD_LEVEL_DEV', '结晶器液位偏差', 'mm', '液位偏差=PV-SP', 2, 1, 50, -50, true, true, 80),
  ('G16', 'CCM_MOLD_LEVEL_FLUCT_MM', '结晶器液位波动幅度', 'mm', '液位波动幅度（滑窗peak-to-peak或标准差）', 2, 1, 30, 0, true, true, 90),
  ('G16', 'CCM_MOLD_OSC_FREQ_HZ', '结晶器振动频率', 'Hz', '结晶器振动频率（如有）', 2, 2, 10, 0, true, true, 100),
  ('G16', 'CCM_MOLD_OSC_AMP_MM', '结晶器振动振幅', 'mm', '结晶器振幅（如有）', 2, 2, 10, 0, true, true, 110),
  ('G16', 'CCM_MOLD_FRICTION_PV', '结晶器摩擦/粘结指数', '-', '用于判断粘结/拉漏风险的摩擦或粘结指数（如模型/设备提供）', 3, 2, 100, 0, true, true, 120),
  ('G16', 'CCM_COOL_WATER_RATE_PV', '二冷水流量当前值', 'm3/h', '二冷水总流量实时值', 4, 0, 4000, 0, true, true, 130),
  ('G16', 'CCM_COOL_WATER_SP', '二冷水流量设定值', 'm3/h', '二冷水目标流量（若有）', 4, 0, 4000, 0, true, true, 140),
  ('G16', 'CCM_COOL_WATER_DEV', '二冷水流量偏差', 'm3/h', '二冷水流量偏差=PV-SP', 4, 0, 4000, -4000, true, true, 150),
  ('G16', 'CCM_COOL_WATER_RATIO', '比水量', 'L/kg', '比水量=二冷水量/浇铸量（治理平台计算）', 1, 3, 5, 0, true, true, 160),
  ('G16', 'CCM_COOL_AIR_MIST_RATE_PV', '气雾冷却气量/流量', 'm3/h', '气雾冷却系统气量/流量（如有）', 4, 0, 4000, 0, true, true, 170),
  ('G16', 'CCM_PROC_BILLET_SURF_T_PV', '铸坯表面温度', '℃', '铸坯表面温度（热像/模型/测温点）', 4, 0, 1400, 0, true, true, 180),
  ('G16', 'CCM_PROC_BILLET_CORE_T_PV', '铸坯中心温度', '℃', '铸坯中心温度（模型推算/测温点）', 4, 0, 1600, 0, true, true, 190),
  ('G16', 'CCM_PROC_MOLD_OUTLET_T_PV', '结晶器出水温度', '℃', '结晶器冷却水出水温度（如有）', 3, 1, 100, 0, true, true, 200),
  ('G16', 'CCM_TUNDISH_WT_PV', '中包重量', 't', '中包钢水重量实时值（如有）', 3, 2, 350, 0, true, true, 210),
  ('G16', 'CCM_TUNDISH_T_PV', '中包温度', '℃', '中包温度实时值（如有）', 4, 0, 1700, 1200, true, true, 220),
  ('G16', 'CCM_LADLE_WT_PV', '大包重量', 't', '大包钢水重量实时值（如有）', 3, 2, 350, 0, true, true, 230),
  ('G16', 'CCM_LADLE_T_PV', '大包温度', '℃', '大包温度实时值（如有）', 4, 0, 1700, 1200, true, true, 240),
  ('G16', 'CCM_QUAL_BREAKOUT_RISK_PV', '漏钢风险评分', '%', '漏钢风险模型输出（0-100），用于红黄绿告警', 3, 2, 100, 0, true, true, 250),
  ('G16', 'CCM_QUAL_STICKER_RISK_PV', '粘结风险评分', '%', '粘结风险模型输出（0-100），用于告警', 3, 2, 100, 0, true, true, 260)
ON CONFLICT (proc_cd, kpi_code) DO UPDATE
SET
  kpi_name = EXCLUDED.kpi_name,
  unit = EXCLUDED.unit,
  description = EXCLUDED.description,
  int_digits = EXCLUDED.int_digits,
  decimal_digits = EXCLUDED.decimal_digits,
  upper_limit = EXCLUDED.upper_limit,
  lower_limit = EXCLUDED.lower_limit,
  display_enabled = EXCLUDED.display_enabled,
  show_in_config = EXCLUDED.show_in_config,
  display_order = EXCLUDED.display_order;
